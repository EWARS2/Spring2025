<!DOCTYPE html>
<html>
<head>
<title>Backend</title>
</head>
<body>
<p>
1. Add a feature to your program that communicates with a backend.
   Make sure that you can send and receive messages.
   Demonstrate this functionality with your app.
   This should be at least 50 lines of new code.
</p>
<p>
Lesson 18
</p>

<button onclick="defaults();">Defaults</button>
<select id="method" name="method">
	<option value="GET">GET</option>
	<option value="POST">POST</option>
</select>
URL: <input id="url" name="url" value='https://supersimplebackend.dev/greeting'>
Data: <input id="data" name="data" value='{"name":"John"}'>
Content Type: <input id="data_type" name="data_type" value='application/json'>
<button onclick="update(method.value, url.value, data.value, data_type.value);">Submit</button>

<p id="demo"></p>

<script>
	const xhr = new XMLHttpRequest();
	xhr.addEventListener('load', () => {
		console.log(xhr.response);
		document.getElementById("demo").innerHTML = xhr.responseText;
	});
	
	function update(method, url, data, data_type) {
		//console.log(data);
		//data = JSON.parse(data);
		//console.log(data);
		//data = JSON.stringify(data);
		//console.log(data);
		xhr.open(method, url, true);
		xhr.setRequestHeader('Content-Type', data_type);
		xhr.send(data);
	}
	
	function defaults() {
		document.getElementById("method").value = 'POST';
		document.getElementById("url").value = "https://supersimplebackend.dev/greeting";
		document.getElementById("data").value = '{"name":"John"}';
		document.getElementById("data_type").value = 'application/json';
	}
	defaults();
	
</script>
</body>
</html>